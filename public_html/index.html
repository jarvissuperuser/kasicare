<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
  <head>
    <title>TODO supply a title</title>
		<meta charset="UTF-8">
    <!--<meta http-equiv="Access-Control-Allow-Origin" content="*">-->
		<script src="framework/jquery.min.js" type="text/javascript"></script>
		<link href="framework/jquery.mobile-1.4.5.min.css" rel="stylesheet" type="text/css"/>
		<script src="framework/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
		<script src="framework/json2.js"></script>
		
		<link href="framework/index.css" rel="stylesheet" type="text/css"/>
		<link href="framework/jquery.mobile.theme-1.4.5.css" rel="stylesheet" type="text/css"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!--<header name = "Access-Control-Allow-Origin" value = "*" />-->
  </head>
  <body>
		<div id="home" data-role="page" data-theme="a">
			<div class="ui-content ui-responsive"><img class="img" src="framework/images/kasi2.png" alt=""/>
				<h3 class="ui-header center-text">Home Page</h3>
				<div class="ui-content">
					<button class="ui-btn ui-icon-user ui-nodisc-icon ui-alt-icon ui-btn-icon-top ui-btn-inline ui-btn-standard" >My Care</button>
					<button class="ui-btn ui-icon-search ui-alt-icon ui-nodisc-icon ui-alt-icon ui-btn-icon-top ui-btn-inline ui-btn-standard">Search</button>
					<button class="ui-btn ui-icon-heart ui-alt-icon ui-nodisc-icon ui-alt-icon ui-btn-icon-top ui-btn-inline ui-btn-standard">Panic</button>
					<button class="ui-btn ui-icon-action ui-alt-icon ui-nodisc-icon ui-alt-icon ui-btn-icon-top ui-btn-inline ui-btn-standard">Bookings</button>
				</div>
				<div data-role='collapsible' data-theme='b' class="info">
					<h4>Quick Info</h4>
					<p>Name: <span class="name"> Bafana Zulu</span></p>
					<p>Meds: <span class="meds">  Adderall </span></p>
					<p>Chronic Conditions: <span class="chron"></span></p>
				</div>
				<div data-role="collapsible" hidden>
					<textarea id="config" placeholder="Config"></textarea>
					<textarea id="manip" placeholder="Data"></textarea>
					<select> 
						<option value="put">put</option>
						<option value="get">get</option>
						<option value="post">post</option>
						<option value=""></option>	
					</select>
					<button id="accept">Send</button>
					<h2>results</h2>
					<p id="results"></p>
				</div>
				<div id="countDown" data-role="popup"  data-theme="b">
					<span class="new-data"></span>
					<a class="ui-btn" data-rel="back">Cancel</a>
				</div>
			</div>
		</div>
		<div id="mycare" data-role="page">
			<div class="ui-content"><img src="framework/images/kasi2.png" class="img" alt=""/>
				<button data-icon="grid" data-iconpos="right" class="ui-nodisc-icon ui-alt-icon"  >My Records </button>
				<button data-icon="info" data-iconpos="right" class="ui-nodisc-icon ui-alt-icon">Medication Schedules</button>
				<button data-icon="action" data-iconpos="right" class="ui-nodisc-icon ui-alt-icon">Profile Management</button>
			</div>
		</div>
		<div id="rec" data-role="page">
			<div class="ui-content"><img src="framework/images/kasi2.png" class="img" alt=""/>
				<div data-role="collapsible" data-theme="b" 
						 data-collapsed-icon="carat-r" data-expanded-icon="carat-d">
					<h4>Record Key</h4>
					<img class="img" src="framework/images/KasiTest.png" alt="">
				</div>
				<div id="pumenu" data-role="popup"  data-theme="b">
	        <ul data-role="listview" data-inset="true" style="min-width:210px;" >
						<li data-role="list-divider">Choose an action</li>
            <li><a href="#" class="ui-btn">Scan</a></li>
            <li>
							<div data-role="collapsible">
								<h4>Add</h4>
								<form onsubmit="UIMan.submit_rec(event)">
									<input placeholder="Incident" name="inci">
									<input type="date" name="i_date">
									<input placeholder="Dr's Signature" name="i_dr">
									<button> Add </button>
								</form>
							</div>
						</li>
	        </ul>
				</div>
				<div ></div>
				<div class="ui-nodisc-icon nav">
					<!--<a href="#popupMenu" data-rel="popup" data-transition="slideup" class="ui-btn  ui-shadow ui-btn-inline ui-icon-gear ui-btn-icon-left ui-btn-a">Actions...</a>-->
					<a  class="ui-btn ui-icon-carat-l ui-alt-icon ui-btn-icon-notext ui-btn-inline "  ></a>
					<a href="#pumenu" data-rel="popup" data-transition="slideup" class="ui-btn  ui-icon-plus  ui-alt-icon ui-btn-icon-notext  ui-btn-inline"  ></a>
					<a  class="ui-btn ui-icon-refresh ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
					<a  class="ui-btn ui-icon-cloud ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
					<a  class="ui-btn ui-icon-carat-r ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
					<a  class="ui-btn ui-btn-inline ui-disabled ui-circle" >1</a>
				</div>
				<div data-role="collapsibleset" data-mini="true" class="care">
					<div data-role="collapsible">
						<h4><span class="title">Empty Rec - </span><span class="date">00-00-0000</span></h4>
						<p class="data ui-bar">Empty</p>
						<a class="location ui-btn">Unknown Location</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Empty Rec - </span><span class="date">00-00-0000</span></h4>
						<p class="data ui-bar">Empty</p>
						<a class="location ui-btn">Unknown Location</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Empty Rec - </span><span class="date">00-00-0000</span></h4>
						<p class="data ui-bar">Empty</p>
						<a class="location ui-btn">Unknown Location</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Empty Rec - </span><span class="date">00-00-0000</span></h4>
						<p class="data ui-bar">Empty</p>
						<a class="location ui-btn">Unknown Location</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Empty Rec - </span><span class="date">00-00-0000</span></h4>
						<p class="data ui-bar">Empty</p>
						<a class="location ui-btn">Unknown Location</a>
					</div>
				</div>
			</div>
		</div>
		<div id="sched" data-role="page">
			<div class="ui-content"><img src="framework/images/kasi2.png" class="img" alt=""/>
				<div data-role="collapsible" data-theme="b" 
						 data-collapsed-icon="carat-r" data-expanded-icon="carat-d">
					<h4>Prescriptions Key</h4>
					<img class="img" src="framework/images/KasiTest.png" alt="">
				</div>
				<div data-role="popup" id="smenu" data-theme="b">
	        <ul data-role="listview" data-inset="true" style="min-width:210px;" >
            <li data-role="list-divider"><span>Add Prescription</span></li>
            <li><a href="#" class="ui-btn">Scan</a> </li>
            <li>
							<div data-role="collapsible">
								<h4>Add</h4>
								<form>
									<input placeholder="Name">
									<input type="date">
									<input placeholder="Dr's Signature">
									<button> Add </button>
								</form>
							</div>
						</li>
	        </ul>
				</div>
				<div ></div>
				<div class="ui-nodisc-icon ">
					<!--<a href="#popupMenu" data-rel="popup" data-transition="slideup" class="ui-btn  ui-shadow ui-btn-inline ui-icon-gear ui-btn-icon-left ui-btn-a">Actions...</a>-->
					
					<a href="#smenu" data-rel="popup" data-transition="slideup" class="ui-btn  ui-icon-plus  ui-alt-icon ui-btn-icon-notext  ui-btn-inline"  ></a>
					<a  class="ui-btn  ui-icon-refresh ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
					<a  class="ui-btn  ui-icon-cloud ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
				</div>
				<div data-role="collapsibleset" data-mini="true">
					<div data-role="collapsible">
						<h4><span class="title">Adderall  </span><span class="time"> 2:00pm</span></h4>
						<a class="location ui-btn" data-icon="grid">Export To Alarm</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Salbutamol </span><span class="time">18/03/2014</span></h4>
            <a class="location ui-btn" data-icon="grid">Completed Course</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Allegex</span><span class="time"></span></h4>
						<p class="data">Completed Course</p>
					</div>
				</div>
			</div>
		</div>
    <div id="prof" data-role="page">
      <div class="ui-content"><img class="img" src="framework/images/kasi2.png" alt=""/>
        <div class="ui-header ui-title">Manage Profiles</div>
        <a href="#user_add" data-transition="slideup" 
					 class="ui-btn ui-icon-plus  ui-alt-icon ui-btn-icon-notext ui-btn-inline"  ></a>
        <div data-role="collapsibleset">
          <div data-role='collapsible' data-theme='b'>
            <h4>Summary <span class="fn">Bafana</span></h4>
            <p>Name: Bafana Zulu</p>
            <p>Prescriptions: Adderall</p>
            <p>Chronic Conditions: Asthma </p>
            <a class="ui-btn ">Edit</a>
          </div>
          <div data-role='collapsible' data-theme='a'>
            <h4>Summary <span class="fn">Basetsana</span></h4>
            <p>Name: Basetsana Zulu</p>
            <p>Prescriptions: Adderall</p>
            <p>Chronic Conditions: Asthma </p>
            <a class="ui-btn ">Edit</a>
          </div>
          <div data-role='collapsible' data-theme='a'>
            <h4>Summary <span class="fn">Thoriso</span></h4>
            <p>Name: Thoriso Zulu</p>
            <p>Prescriptions: Adderall</p>
            <p>Chronic Conditions: Asthma </p>
            <a class="ui-btn ">Edit</a>
          </div>
        </div>
			</div>
    </div>
		<div id="user_add" data-role="page">
			<div class="ui-content">
        <!--<img class="img" src="framework/images/kasi2.png" alt=""/>-->
				<a data-rel="back" class="ui-btn ui-btn-icon-notext ui-icon-delete ui-nodisc-icon ui-alt-icon ui-btn-right"></a>
					<h3 class="ui-header center-text">Add New User</h3>
				<div data-role="collapsible-set" data-mini="true">
					<div data-role="collapsible" class="ua_1">
						<h4> Basic Information (step 1/4) </h4>
						
						<form onsubmit="UIMan.add_user(event,1)">
							<input name="unique_id" class="ui-hidden-accessible" >
							<input placeholder="Email" name="email" type="email" required="">
							<input placeholder="Phone Number" name="phone" required="">
							<input placeholder="Name" name="name">
							<input placeholder="Surname" name="surname">
							<fieldset data-role="controlgroup" data-mini="true">
								<!--<legend>Gender</legend>-->
								<input name="gender" value="m" type="radio" id="male" class="ui-"/><label for="male">male</label>  
								<input name="gender" value="f" type="radio" id="female" checked="checked" class="ui-btn-standard"/><label for="female">female</label>
								<input name="gender" value="a" type="radio" id="amale" class="ui-ui-btn-standard"/><label for="amale">ambiguous</label>
							</fieldset>
							<button type="submit">Next</button>
						</form>						
					</div>
					<div data-role="collapsible" class="ua_2">
						<h4> Details (step 2/4) </h4>
						<form onsubmit="UIMan.add_user(event,2)">
							<input name="ulist_id" class="ui-hidden-accessible">
							<input name="date_of_birth" type="date" class="" required="">
							<input name="occupation" placeholder="Occupation"  class="" >
							<input name="address" placeholder="Home Address" class="">
							<input name="work" placeholder="Work Address"  class="" >
							<button type="submit">Next</button>							
						</form>						
					</div>
					<div data-role="collapsible" class="ua_3">
						<h4> Security Details (step 3/4) </h4>
						<form onsubmit="UIMan.add_user(event,3)">
							<input name="ulist_id" class="ui-hidden-accessible">
							<input name="salt_version" class="ui-hidden-accessible">
							<input name="nat_id_number" placeholder="ID Number"  class="" >
							<input name="nationality_key" placeholder="Nationality"  class="" >
							<input name="nat_id_number" placeholder="ID Number"  class="" >
							<button type="submit">Next</button>		
						</form>						
					</div>
					<div data-role="collapsible" class="ua_4">
						<h4> Profiling (step 4/4) </h4>
						<form onsubmit="UIMan.add_user(event,4)">
							<input name="work" type="date" class="ui-hidden-accessible" >
							<button type="submit">Next</button>	
						</form>						
					</div>
				</div>
      </div>
		</div>
    <div id="faci" data-role="page">
      <div class="ui-content">
        <h2 class="ui-header">Place Booking</h2>
				<a data-rel="back" class="ui-btn ui-btn-icon-notext ui-icon-delete ui-nodisc-icon ui-alt-icon ui-btn-right"></a>
				<ul data-role="listview" data-filter="true" data-filter-reveal="true" data-filter-placeholder="Search Health Facilities..." data-inset="true">
					    <li><a href="#">Steve Biko</a></li>
					    <li><a href="#">Netcare</a></li>
					    <li><a href="#">Medi Cross</a></li>
					    <li><a href="#">Sunning Hill Hospital</a></li>
					    <li><a href="#">Medi-Clinic</a></li>
					    <li><a href="#">Hillbrow Clinic</a></li>
				</ul>
      </div>
    </div>
		<div id="fac" data-role="page">
			<div class="ui-content">
				<h2 class="ui-header">Places & Prices</h2>
				<form>
					<input data-type="search" data-rel='filterable' placeholder="Search Services" id='facs' />
				</form>
				<div data-role="collapsibleset" data-mini="true" data-filter='true' data-filter-reveal='true' data-input='#facs' class="care">
					<div data-role="collapsible">
						<h4><span class="title">Lister Clinic </span></h4>
						<ul data-role="listview">
							<li data-role="list-divider">SERVICES</li>
							<li>Consultation - <span class="price">R350 - R400</span></li>
							<li>Review - <span class="price">R150 - R200</span></li>
							<li>Family Planning - <span class="price">R150 - R750</span></li>
							<li>Pregnancy sonar - <span class="price">R650</span></li>
							<li>Radiology - <span class="price">R350 - R1000</span></li>
							<li>Pathology Tests- <span class="price">R700 - R2000</span></li>
							<li>Observations - <span class="price">R100 - R500</span></li>
						</ul>
						<a class="location ui-btn">Hillbrow</a>
						<a class="location ui-btn">Jo'burg</a>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Travel Doctor </span></h4>
						<ul data-role="listview">
							<li data-role="list-divider">SERVICES</li>
							<li>Dentist - <span class="price"></span></li>
							<li>Dietician - <span class="price"></span></li>
							<li>General Practitioners - <span class="price"></span></li>
							<li>Laboratory - <span class="price"></span></li>
							<li>Pharmacy - <span class="price"></span></li>
							<li>Physiotherapist - <span class="price"></span></li>
							<li>Radiology - <span class="price"></span></li>
						</ul>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">The local c </span></h4>
						<ul data-role="listview">
							<li data-role="list-divider">SERVICES</li>
							<li>diabetic care and dietary advice</li>
							<li>blood pressure monitoring</li>
							<li>glucose screening</li>
							<li>Cholesterol screening</li>
							<li>HIV screening, testing and counseling</li>
							<li>Weight loss advice</li>
							<li>Vitamin injections </li>
							<li>Medical Aid health assessments	</li>
							<li>Nebulization and inhalation</li>
							<li>Wound care</li>
						</ul>
					</div>
					<div data-role="collapsible">
						<h4><span class="title">Netcare </span></h4>
						<ul data-role="listview">
							<li data-role="list-divider">SERVICES</li>
							<li>Dietician - <span class="price"></span></li>
							<li>Optometry - <span class="price"></span></li>
							<li>Family Planning - <span class="price"></span></li>
							<li>Psychology - <span class="price"></span></li>
							<li>Radiology - <span class="price"></span></li>
							<li>Pathology Tests- <span class="price"></span></li>
							<li>Observations - <span class="price"></span></li>
						</ul>
						<a class="location ui-btn">Constantia Park</a>
						<a class="location ui-btn">Randburg</a>
						<a class="location ui-btn">Spring</a>
						<a class="location ui-btn">Gezina</a>
						<a class="location ui-btn">Roodeport</a>
					</div>
				</div>
			</div>
		</div>
<script src="framework/firebase.js"></script>
<script src="framework/firebaseEngine.js"></script>
<script src="framework/dataAppend.js" type="text/javascript"></script>
<script src="framework/UIMan.js" type="text/javascript"></script>
<script src="framework/query.js" type="text/javascript"></script>
		<script>
			var btns;
			$(document).ready(function(){
				$('#countDown').show();
				//fbOp.init();
				//var user = firebase.auth().currentUser || 0;
				
//				if (user){
//					console.log(user.uid);
//				}
//				else{
//					firebase.auth().signInAnonymously().catch(function(res){
//						console.log(res);
//					});
//				}
				console.log(queryBuild.init());
				btns = {
					getInfo:function(data){
						alert(JSON.stringify(r));
					},
					click:function (a){
						//console.log(firebase.User);
						try{
//							fbOp.getData("/users/data",fbOp.callBackList);
							btns.btnBehaviour(a.currentTarget);
						}catch(e){
							alert(e.message);
						}
					},
					btnBehaviour:function(btn){
						if($(btn).hasClass("ui-icon-user"))
							$.mobile.changePage('#mycare');
						if($(btn).hasClass("ui-icon-grid"))
							$.mobile.changePage('#rec');
						if($(btn).hasClass("ui-icon-info") 
										&& location.hash === "#mycare")
							$.mobile.changePage('#sched');
            if($(btn).hasClass("ui-icon-action") 
										&& location.hash === "#mycare")
              $.mobile.changePage('#prof');
            if($(btn).hasClass("ui-icon-search") 
										&& (location.hash === "#home" || location.hash===""))
              $.mobile.changePage('#fac');
						if ($(btn).hasClass("ui-icon-heart") && 
										(location.hash === "#home" || location.hash===""))
						{
							$("#countDown").popup("open");
							var count = 30;
							$(".new-data").text("Calling 911 in " + count + " secs");
							var cdwn = setInterval(function(){
								if (count > 0){
									count--;
									$(".new-data").text("Calling EMS in "+count+" secs");
								}else
								{
									//$("#countDown").popup("close");
									$(".new-data").text("EMS Called");
									clearInterval(cdwn);
								}
							},1000);
							$('#countDown a').click(function(){
								clearInterval(cdwn);
							});
						}
						if ($(btn).hasClass("ui-icon-action") && 
										(location.hash === "#home" || location.hash===""))
						{
							$.mobile.changePage('#faci');
						}
						
					},
					actionFilter:function (btn){
						return btn;
					}
				};
				$('button').click(btns.click);
			});
		</script>
  </body>
</html>
